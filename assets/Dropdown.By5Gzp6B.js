import{m as h,j as o}from"./jsx-runtime.C_VTVcfo.js";import{R as l}from"./index.B52nOzfP.js";const r=e=>{const t=document.documentElement,n=window.innerWidth-t.clientWidth,s=window.innerWidth<=700;e?(t.style.paddingRight="0px",t.setAttribute("data-scroll-lock","false")):(!s&&n>0&&(t.style.paddingRight=`${n}px`),t.setAttribute("data-scroll-lock","true"))},g=()=>{r(!0)},x=()=>{r(!1)},D=(e,t)=>{if(!t)return r(e);setTimeout(()=>{r(e)},t)},u={set:r,show:g,hide:x,delay:D},i=h([]),b=(e,t)=>{m(),u.hide();const n=i.get(),s=n.length+Math.random(),d=e.getBoundingClientRect(),c={top:d.bottom+window.scrollY,left:d.left+window.scrollX};return i.set([...n,{id:s,target:e,...t,state:!0,top:c.top,left:c.left,animation:t?.animation||"slide"}]),s},m=e=>{const t=i.get();if(e){const n=t.map(s=>s.id===e?{...s,state:!1}:s);i.set([...n])}else{const n=t.map(s=>({...s,state:!1}));i.set([...n])}},w=e=>{if(u.show(),e){const n=i.get().filter(s=>s.id!==e);i.set(n);return}i.set([])},R=(e,t)=>{setTimeout(()=>{w(e)},t||0)},a={render:b,remove:w,close:m,removeDelay:R};class j{dropdownRefs=new Map;constructor(){document.addEventListener("click",this.handleClickOutside),window.addEventListener("resize",this.handleResize)}registerDropdown(t,n){this.dropdownRefs.set(t,n)}unregisterDropdown(t){this.dropdownRefs.delete(t)}handleClickOutside=t=>{const n=t.target;this.dropdownRefs.forEach((s,d)=>{s&&!s.contains(n)&&a.close()})};handleResize=()=>{this.dropdownRefs.clear(),a.remove()}}const f=new j;function N(e){const[t,n]=l.useState(!1),s=l.useRef(null);return l.useEffect(()=>{e.state!==void 0&&(n(e.state),e.state===!1&&a.removeDelay(e.id,170))},[e.state]),l.useEffect(()=>(s.current&&e.id&&f.registerDropdown(e.id,s.current),()=>{e.id&&f.unregisterDropdown(e.id)}),[e.id]),o.jsxs("div",{className:`dropdown-menu f-col fixed br-6 sd-1 ${t?"visible":"delete"} ${e.animation}`,style:{...e.style,top:e.top,left:e.left,transform:e.transform},"data-offset":e.offset,ref:s,children:[e.title&&o.jsx("p",{className:"dropdown-menu-head m-0 fs-2 fw-600",children:e.title}),e.contents?.map((d,c)=>o.jsx(v,{props:d,id:e.id},c))]})}const v=({props:e,id:t})=>o.jsx("ul",{className:"dropmenu-section f-col",children:e.map((n,s)=>o.jsx(k,{...n,id:t},s))}),k=e=>{const t=async n=>{if(n.preventDefault(),await e.onClick?.(),a.close(e.id),e.href){if(!e.href.startsWith("http"))return;window.location.href=e.href}};return o.jsx("li",{className:"dropmenu-item br-4 f-row f-justify-between pointer",onClick:t,children:e.href?o.jsx("a",{className:"fs-2 fw-500 m-0 mr-6 w-100",href:e.href,children:e.text}):o.jsx("p",{className:"fs-2 fw-500 m-0 mr-6w-100",children:e.text})})},C=e=>o.jsx("span",{className:`drop-btn btn  ${e?.className||"btn-third br-6"}`,onClick:t=>{t.stopPropagation();const n=t.target;a.render(n,e)},children:e?.text||"Open"});export{i as $,N as D,C as O};
