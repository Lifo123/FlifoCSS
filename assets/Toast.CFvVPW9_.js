import{a as m,j as i,m as h}from"./jsx-runtime.C_VTVcfo.js";import{R as u}from"./index.B52nOzfP.js";import{u as N}from"./index.DcIy302Z.js";function z(e,t){let s=$(t),n=e;for(let l of s){if(n===void 0)break;n=n[l]}return n}function P(e,t,s){return R(e??{},$(t),s)}function R(e,t,s){let n=t[0],l=Array.isArray(e)?[...e]:{...e};return t.length===1?(s===void 0?Array.isArray(l)?l.splice(n,1):delete l[n]:l[n]=s,l):(D(l,n,t[1]),l[n]=R(l[n],t.slice(1),s),l)}const v=/(.*)\[(\d+)\]/;function $(e){return e.split(".").flatMap(t=>I(t))}function I(e){if(v.test(e)){let[,t,s]=e.match(v);return[...I(t),s]}return[e]}const C=/^\d+$/;function D(e,t,s){if(t in e)return;C.test(s)?e[t]=Array(parseInt(s,10)+1):e[t]={}}function E(e={}){let t=m(e);return t.setKey=(s,n)=>{if(z(t.value,s)!==n){let l=t.value;t.value=P(t.value,s,n),t.notify(l,s)}},t}const S={init:[]},d=E(S),K=e=>{const t=e.toastID||"init",s=d.get()[t]||[],n=s.length+Math.random();if(s.some(o=>o.id===n))return;const l={...e,id:n,toastID:t,state:!0},a=()=>(d.setKey(t,[...s,l]),{toastID:t,id:n});if(e.delay)setTimeout(a,e.delay);else return a()},A=(e,t)=>{const s=d.get()[e];if(s){const n=s.filter(l=>l.id!==t);d.setKey(e,n)}},L=(e,t,s)=>{setTimeout(()=>{A(e,t)},s||0)},W={set:K,removeKey:A,removeByDelay:L},_=i.jsx("svg",{viewBox:"0 0 20 20",fill:"currentColor",height:"22",width:"22",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})}),G=i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"22",width:"22",children:i.jsx("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})}),H=i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"22",width:"22",children:i.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})}),V=i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"22",width:"22",children:i.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})}),O={success:_,warning:G,error:V,info:H},f=h({G_all:!1,G_fetch:!1}),F=e=>{const t=f.get()[e];f.setKey(e,!t)},x=(e,t)=>{f.setKey(e,t)},q=async(e,t)=>{const s=t?.id||"G_fetch";await new Promise(n=>setTimeout(()=>{x(s,!0),n()},t?.delayIn||0)),await e(),await new Promise(n=>setTimeout(()=>{x(s,!1),n()},t?.delayOut||0))},U={toggle:F,set:x,promise:q};function X({id:e="G_fetch",text:t,className:s,style:n,stroke:l,funct:a}){const o=N(f),c=async()=>{a&&U.promise(a,{id:e,delayOut:20})};return i.jsxs("span",{className:`btn-promise f-row f-center btn br-6 relative ${s||"btn-third"}`,onClick:c,style:n,"data-btn-promise":e,children:[o[e]&&i.jsx("span",{className:"lb-loading-indicator absolute",children:i.jsx("span",{className:"lb-circular-root",style:{height:20},children:i.jsx("svg",{viewBox:"22 22 44 44",stroke:l||"rgb(var(--lb-black))",children:i.jsx("circle",{cx:"44",cy:"44",r:"20.2",fill:"none",strokeWidth:"4"})})})}),i.jsx("p",{className:`m-0 opacity-${o[e]&&"0"}`,children:t||"Button"})]})}const j=m(!1),b=m(!1),g=m(null),w=h(),M=h(),B=h(),Y=async({title:e,message:t,link:s,children:n,id:l,bgClose:a,closeBtn:o,funct:c=()=>{console.log("Without Function")}})=>{y(!0,l||""),w.set({bgClose:a,closeBtn:o}),B.set({title:e,message:t,link:s,children:n,funct:c})},J=async(e,t)=>{y(!0,t?.id||""),w.set({...t}),M.set({children:e,...t})},Q=()=>{y(!1)},T=e=>{const t=document.documentElement,s=window.innerWidth-t.clientWidth,n=window.innerWidth<=768;e?(!n&&s>0&&(t.style.paddingRight=`${s}px`),t.style.overflow="hidden"):setTimeout(()=>{t.style.paddingRight="0px",t.style.overflow="auto"},160)},y=async(e,t)=>{e?(Z(t||""),j.set(!0),setTimeout(()=>b.set(!0),5),T(e)):(b.set(!1),setTimeout(()=>{j.set(!1),M.set({}),w.set({}),g.set(null),B.set({title:"",message:""})},150),T(e))},Z=e=>{if(e)g.set(e);else{const s=document.querySelector(".portal-popup")?.getAttribute("id")||"init";g.set(s)}},p={normal:Y,close:Q,custom:J};function ee({size:e,stroke:t}){return i.jsx("span",{className:"lb-popup-close br-6 d-flex f-center",style:{width:e||30},onClick:p.close,children:i.jsx("svg",{width:"85%",viewBox:"0 0 24 24",fill:"none",stroke:t||"rgba(var(--lb-black), .7)",children:i.jsx("g",{children:i.jsx("path",{d:"M7 7.00006L17 17.0001M7 17.0001L17 7.00006",strokeWidth:"2.064",strokeLinecap:"round",strokeLinejoin:"round"})})})})}function le({id:e="init",position:t="bottom-center",duration:s=2250,animate:n="normal",maxToasts:l=3,parent:a}){const o=N(d);if(u.useEffect(()=>{document.querySelectorAll('[data-toaster-id="init"]').length>1&&console.warn(`Toaster with id "${e}" already exists. Skipping render.`)},[e]),!o[e])return null;const c=o[e].slice(-l-1);return i.jsx("section",{className:`toaster-container ${a?"absolute":"fixed"} h-100 w-100`,"data-toaster-id":e,children:c&&c.map((r,k)=>i.jsx(te,{...r,duration:r.duration||s,position:r.position||t,animate:r.animate||n,closeBtn:r.closeBtn,state:!(k===0&&c.length>l)},r.id))})}const te=e=>{const[t,s]=u.useState(!1),[n,l]=u.useState(!1),[a,o]=u.useState(!1),c=async()=>{s(!1),setTimeout(()=>{e.toastID&&e.id!==void 0&&e.duration!==void 0&&(W.removeKey(e.toastID,e.id),l(!0))},300)};return u.useEffect(()=>{const r=setTimeout(()=>s(!0),10);return()=>clearTimeout(r)},[]),u.useEffect(()=>{if(n)return;const r=setTimeout(()=>{a||c()},e.duration);return()=>clearTimeout(r)},[a,e.duration,n]),u.useEffect(()=>{e.state||setTimeout(()=>{c()},50)},[e.state]),n?null:e?.children&&i.jsx("span",{className:"d-flex",style:{pointerEvents:"visible"},children:e.children})||i.jsxs("span",{className:`toast-row f-row f-justify-between f-align-center absolute br-6 sd-1 ${t?"visible":"delete"} ${e.animate} ${e.className||""}`,"data-position":e.position,"data-axis-y":e.position?.split("-")[0],"data-axis-x":e.position?.split("-")[1],"data-animate":e?.animate,style:{...e.style,zIndex:e.id},onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[i.jsxs("div",{className:"f-row g-1",children:[e.customIcon||e.icon||e.type&&i.jsx("span",{className:"toast-icon mr-2 d-flex f-center",children:e.customIcon?e.customIcon:O[e.icon||e.type]}),i.jsxs("div",{className:"f-col g-1 f-justify-center",children:[e.title&&i.jsx("h3",{className:"fs-2",children:e?.title}),i.jsx("p",{className:"fs-custom-13-5 m-0",children:e?.message}),e.link&&i.jsx("a",{className:"info fs-2 br-6 w-max",href:e.link,children:"More"})]})]}),e.action?i.jsx(X,{text:e.actionText||"Continue",funct:async()=>{await e.action(),c()}}):e.closeBtn?i.jsx("span",{className:"ml-3 d-block",onClick:()=>{c()},children:i.jsx(ee,{size:24})}):null]})};export{le as Toaster};
